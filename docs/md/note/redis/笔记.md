# 对文章进行投票例子

https://blog.csdn.net/weixin_33922670/article/details/88902943

## 背景

>- 至少200张票是有趣文章，把所有的有趣文章放到前100位至少一天
>- 随时间流逝评分不断减少以避免票数多的一直停留在列表前列
>
>将文章的支持票数乘以一个常量432（由一天的秒数86400除以文章展示一天所需的支持票200得出），然后加上文章发布时间(从1970.1.1到文章的发布时间的差值，越新的文章这个值越高)得出的结果就是文章评分。
>
>1. 使用散列存储文章信息，key为article:id，value为文章信息包括title、link、poster、time、votes
>2. 使用有序集合存储文章发布时间，key为time:，value为article:id，分值为发布时间（便于根据发布时间排序）
>3. 使用有序集合存储文章id，key为score:，value为article:id，分值为文章评分（便于根据评分排序）
>4. 为了防止一个用户多次投票，用集合记录已投票用户，voted:id为key,value为user:id
>5. 为了让用户只看到特定话题的文章，用集合记录文章，key为groups:话题，value为article:id
>
>为了节约内存，当一篇文章发布期满一周之后用户将不能对它投票，文章评分将被固定而记录已投票用户的名单也将被删除。

## 用户发表文章

- 通过计数器创建新的文章ID
- 添加发布者ID到记录文章已投票用户名单的集合里面，并设置过期时间让文章期满一周之后自动删除这个集合
- 存储文章相关信息
- 将文章的初始评分和发布时间分别添加到两个相应的有序集合中





