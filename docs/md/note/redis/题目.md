# redis有哪些数据结构

>String
>
>Hash
>
>List
>
>Set
>
>SortedSet
>
>HyperLogLog、Geo、Pub/Sub
>
>BloomFilter，RedisSearch，Redis-ML

# 大量key同一时间过期

> 短暂卡顿、缓存雪崩

# Redis分布式锁

> setnx(key,requestId,"NX","EX",expireTime)
>
> requestId:加解锁是一个客户端，将expireTime避免宕机无法释放锁，整条原子命令避免加锁以后宕机无法加上超时时间
>
> 有效时间设置多长？
>
> 1. 靠业务自己预估但是不靠谱
>
> 2. 看门狗机制实现锁续期
>
> 怎么实现可重入？
>
> 使用hset加减值

# 大量同前缀的key搜索

>keys可以扫描，但是会阻塞造成性能问题
>
>scan指令可以无阻塞的提取出指定模式的key列表，但是会有一定的重复概率，在客户端做一次去重就可以了，但是整体所花费的时间会比直接用keys指令长。

1 实际情景

> 怎么用redis限制每个人每分钟访问3次

